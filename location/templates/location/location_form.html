{% extends "home/base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}{% if form.instance.pk %}Edit {{ form.instance.name }}{% else %}Add New Location{% endif %}{% endblock %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{% url 'location:dashboard' %}">Locations</a></li>
    <li class="breadcrumb-item"><a href="{% url 'location:location-list' %}">All Locations</a></li>
    {% if form.instance.pk %}
    <li class="breadcrumb-item"><a href="{{ form.instance.get_absolute_url }}">{{ form.instance.name }}</a></li>
    <li class="breadcrumb-item active" aria-current="page">Edit</li>
    {% else %}
    <li class="breadcrumb-item active" aria-current="page">Add Location</li>
    {% endif %}
  </ol>
</nav>
{% endblock %}

{% block content %}
<div class="container">
  <h1 class="mb-4">{% if form.instance.pk %}Edit {{ form.instance.name }}{% else %}Add New Location{% endif %}</h1>

  {% if form.errors %}
  <div class="alert alert-danger">Please correct the errors below.</div>
  {% endif %}

  <form method="post" enctype="multipart/form-data" novalidate>
    {% csrf_token %}
    {% for field in form.visible_fields %}
      <div class="mb-3">
        {{ field.label_tag }}
        {{ field }}
        {% if field.help_text %}<div class="form-text">{{ field.help_text }}</div>{% endif %}
        {% if field.errors %}<div class="invalid-feedback d-block">{{ field.errors|first }}</div>{% endif %}
        {% if field.name == 'location_type' %}
          <div class="form-text">
            <a href="{% url 'admin:location_locationtype_add' %}" target="_blank">Add Location Type</a>
          </div>
        {% endif %}
      </div>
    {% endfor %}
    <button type="submit" class="btn btn-primary">Save</button>
  </form>
</div>
{% endblock %}
